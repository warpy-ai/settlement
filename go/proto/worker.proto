syntax = "proto3";

package worker;
option go_package = "settlement-core/proto";

service WorkerService {
  rpc ProcessTask (TaskRequest) returns (stream TaskResponse) {}
}

message TaskRequest {
  string task_id = 1;
  string content = 2;
  string api_key = 3;
  string system_prompt = 4;     // Custom system prompt (optional, empty = use default)
  double temperature = 5;       // Model temperature (0 = use default)
  int32 max_tokens = 6;         // Max tokens for response (0 = use default)
}

message TaskResponse {
  string task_id = 1;
  string result = 2;
  string error = 3;
  WorkerStatus status = 4;
}

enum WorkerStatus {
  UNKNOWN = 0;
  PROCESSING = 1;
  COMPLETED = 2;
  FAILED = 3;
} 